# Maven

## Introduction and Setting Up
Maven = Build Tool + Project Management Tool.

### Problems
    Multiple jars
    Dependencies and versions
    Project structure
    Building, publishing and deploying

## 1
For installing maven you may use https://maven.apache.org/download.cgi
If you are using Windows pc then you should add bin folder reference to system variables of operating system
to path variable section

Maven has its own remote repository and gather required informations.

Your machine should having internet connection because maven need internet connection for accessing
  its repositories also you may defined in your infrastructure
  
### What is archetype?
Archtype is project model for your application.

[From Command Line] mvn archetype:generate (archtype means prototype model)
After Running the following command its going to ask you about like which model do you want to create
  Just type number of the model and maven is going to create for you
  
Just before creating your model maven will ask you about the versions
Which version of the archtype, you want to use?

And maven will ask you about some properties                    
groupID(Analogous to package Name for your components)  Analogous(Like simillar) 
Ex: org.namiduru.messagemachine

artifactID(Analogous to class name)
Creating ve deploying de bu ismi kullanmayi dusunebiliriz o sekilde bir isim verebiliriz
Ex: MavenTestApp
Ex: MassageMachine

versionNumber
This cames 1.0-SNAPSHOT by default and you may change it

propertyPackage
It takes groupID by default

Finally It is going to ask for confirmation
Press "y" and finished...

Application build and packed as Jar File
  <packaging>jar</packaging>
  <take maven as I want to take my output as Jar>
  
<artifactID> Here if you want to publish on repository you should call as that
<name> Here is the name of the application, it might not same as the artifactID

Note: If we define JUnit and if it need some other dependencies we don't need to
define them because maven repository find its dependencies and send us.

<dependencies>
  <dependency>
    <groupID>junit</groupID> 
      <artifactID>junit</artifactID>
      <version>3.8.1</version>
      <scope>test</scope>   -> Its for defining when our application will need the following dependency
   </dependency>               
 </dependencies>
 
 ## 2
To compile your project you have to go your pom.xml directory and run "mvn compile"
Maven will you download all dependencies that you mention on your pom.xml File

Is going to compile your jar files in your application directory
Is also going to download some plugins if its your first time to compile command it would take some time

"mvn package" -> That maven file is responsible for package your file into the jar

At the same time when you tring to make package and jar. Mavel will authomaticly run test cases

//To run your java application
java -cp target/MavenTestApp.jar org.namiduru.messagemachine (.java extension typing is not necessery)
java -cp jarFile + main.class

For Example:
    java -cp target/MessageMachine-1.0-SNAPSHOT.jar com.namiduru.MessageMachine.App

Maven repository informations
    - Archetype information
    - Dependency information

Dev Environment
 - Maven -> You request to take archtype and maven creates directory structure for you
  
  groupID informs maven that this project is belong to this group (What we use as a package)
        - Its like unique id for example com.namiduru.education.memo
            namiduru is the domain name that i can control

    artifactID id is that when generating jar file (name of the jar without extension)
        - For example for JUnit you have to use "JUnit"
        - Name of you jar that generated by your application

    versions
        - (1.0, 1.1, 1.0.1, ...)
        Don't use dates as they are usually associated with SNAPSHOT (nightly) builds.

        SNAPSHOTS usually means like project that still under development

## 3
Maven Concepts
Understand some of the basic Maven concepts like archetypes, build phases and dependencies.
Setup a web application using Maven that covers the concepts you've learned.

Maven
    Project Template
    Build
    




Archetype -> Java SE, Spring etc... (Folder structure of the application, dependencies that required)
Group ID -> Common Project ID 
Artifact ID -> Output of the project
Version -> 
Package -> Sectigimiz archetype a gore sekillenen dosya turunu soyleyen tag jar,war gibi

All of these informatons will be add to pom.xml file

If we want to publish something on maven repository
Maven will look GroupID + Articat ID + Version


Tags decripres that our source code will be encoded in UTF-8 format
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>


Note: Maven groupID, artifactID, version numarasina bakarak gerekli dosyalari indirirken
    ilk basta local repository de yaratilmis mi diye oradan bakiyor varsa oradan cekiyor
    yoksa girip online repositorysinden cekiyor

pom.xml
    Maven co-ordinates (Duzenlemek) -> artifactID, versionNumber, groupID...
    Metadata -> Mavenimiz hangi proje versiyondayiz
    Build information -> War mi, JAR mi ne elede edecegiz
    Resource and dependencies -> Projeyi build edecegimiz zaman bize gerekli olan dosyalar

<Section 2-2>

Bizim indirdigimiz projede maven eger main folderin daysa bu source folderimizdir
    Eger test folderindaysa bu bizim test folderimizdir diye dusunuyor

Maven Build
    Build lifecycle
    Consist of phases
    Default behavior of phases
    Specify the build phase you need. Previous phases autoatically run

Genelde bir pakatleme isleminden once o kodun test edilemsini istersin
    o yuzden maven default olarak compile test packege gibi bir build lifecycle i var

Some phases
    Validate -> Is pom.xml exsist, is syntax is valid, is project structure coincide with given pom.xml etc...

    Compile -> Takes Java files and complies them into class files (maven compile)

    test -> Run test cases. Test knows that there is a test file that im trying to compile (mvn test)   

    Package -> If above three cases has been accapted by maven, packageing will start 
        EX: jar, war (mvn package) (compile + test)

    install -> install the local package into the local repository (mvn install)

    deploy -> eger remote repository ye birsey atmak istiyorsak


2.3 Adding a Dependency
In this tutorial we'll learn about dependencies by adding one.
We'll write code to use the slf4j logging framework, and we'll modify our pom.xml to specify 
    the dependency to Maven.
<Section 2-3>

mvn clean -> Deletes target folder

As an example
    Go and add
        import org.slf4j.*;
    
    Logger logger = LoggerFactory.getLogger(App.class);
    logger.info("Hello World!");

    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-api</artifactId>
      <version>1.7.25</version>
    </dependency>

!!! Yukarida goruldugu gibi <scope> tag bulunmuyor buda demektir ki Burada
    <scope>compile</scope> diye bir tag bulunuyor default olarak
    eger biz scope vermiyorsak maven default olarak bunu almaktadir
    
    Compile Phase: Bu Jar dosyasi sadece bizim compile phaseimizde bulunacaktir
        anlamina geliyor

mvn compile yaptigimiz zaman maven bizim icin gerekli olan repositoryleri
    cekecek ve compile islemimizi tamamliyacak

2.4 A Web Application Using Maven
We'll use the web application archetype to create a barebones web application.
We'll then package, deploy in Tomcat and access this application.
<Section 2-4>

mvn archetype:generate
j2ee14 269 JavaEE WebApplication
mvn compile => Downloading dependencies and finished the compilecation
mvn package

Install TomCat server -> Manager App Section
Delploy your war file through it

<build>
    <plugins>
        <plugin>
            <groupID>org.apache.maven.plugins</groupID>
            <artifactID>maven-compiler-plugin</artifactID>
            <version>2.0.2</version>
            <configuration>
                <source>1.4</source>
                <target>1.4</target>
            </configuration>
        </plugin>
    </plugins>
</build>

Normal de build ederken compiler automatic olarak kendi default settinglerini kullaniyor
    Tag lerle bu sekilde belirtere compiler in nasil bir davranis gostermesi gerektirdigini ayarliyabiliyoruz

...Configurations for Tomcat AdminPanel...

<role rolename="manager-gui"/>
    <user username="tomcat" password="tomcat" roles="manager-gui"/>


<Section 3-1>

Maven Plugins
Maven has a concept of plugins that let you implement added funcionality to your build cycle.
Learn about the Jetty plugin that lets you spin up a servlet container right from a Maven command.
Also, learn how to integrate Maven with Eclipse.

org.apache.maven.plugins will give compilecation error if our versioun is 1.4
We may fixed them from maven compilecation plugins

Maven 3 de java 1.5 default olarak geliyor
Maven 2 de java 1.4 default olarak geliyor
Eger compiler pluginnini pom.xml e dahil etmezsek default olarak geldigi sekilde
    configrasyonlari maven arkaplanda set eder

Mesala JavaGenericler Java 1.5 de gelmistir

<Section 3-2>

For using maven plugins first you should declare your plugin at pom.xml
Including Jetty Plugins

If i have defined these plugin at below i may use them from my mvn command prompt
<build>
    <plugins>
        <plugin>
            <groupID>org.mortbay.jetty</groupID>
            <artifactID>maven-jetty-plugin</artifactID>
            <version>6.1.10</version>
            <configuration>
            <scanIntervalSeconds>5</scanIntervalSeconds> //Allows jetty server refrech its content by 5 seconds
            </configuration>
        </plugin>
    </plugins>
</build>

mvn jetty:run (First Part is plugin name)(Second Part is what plugin should do)


3.3 Eclipse Plugin for Maven and Maven Plugin for Eclipse
More plugins! We'll use the Maven's Eclipse plugin to get our Maven project into the Eclipse IDE.
We'll also download and install the m2eclipse plugin of Eclipse to bring Maven functionality into the Eclipse GUI.
<Section 3-3>

mvn eclipse:eclipse (You dont have to mention all plugins in pom.xml)
                    Its already defined for maven without declearing
The following command helps you configure your project into the IDE you working


